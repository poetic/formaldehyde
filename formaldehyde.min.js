Meteor.isClient&&("undefined"==typeof Meteor.Poetic?Meteor.Poetic={}:console.log("Meteor.Poetic already exhists"),Meteor.Poetic.ParamManager=function(){function e(){o.forEach(function(e){var n=t(e.param);e.value!==n&&(e.callback(n),e.value=n)})}function n(e,n,t){var a=location.href.split("?")[0],r=[];o.forEach(function(t){e===t.param?null!==n&&r.push(t.param+"="+n):t.value&&r.push(t.param+"="+t.value)});var c="?"+r.join("&");t?history.replaceState({},"OptionalTitle",a+c):history.pushState({},"OptionalTitle",a+c)}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=n.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var a={},o=[];a.RegisterParam=function(e,n){o[o.length]={param:e,value:null,callback:function(){n(t(e))}}},a.DeRegisterParam=function(e){o.forEach(function(n,t,a){n.param===e&&a.splice(t,1)})},a.isRegistered=function(e){return o.some(function(n){return n.param===e})},a.setParam=function(e,t,a){n(e,t,a),document.dispatchEvent(r)},a.getParam=function(e){return t(e)};var r=new Event("urlchange");return window.onload=function(){document.addEventListener("urlchange",function(){e()},!1),window.onpopstate=function(){document.dispatchEvent(r)},document.dispatchEvent(r)},a}());
